@inject NavigationManager _NavigationManager
@inject IJSRuntime Js
@inject AuthenticationStateProvider stateprovider
@inject CustomAuthenticationStateProvider AuthenticationStateProvider
@inject IDataflow Flow
@inject ToastService ToastService
@inject ProtectedSessionStorage SessionStorage



<div class="login-container">
	<div class="blob blob-1"></div>
	<div class="blob blob-2"></div>

	<div class="login-card">
		<header class="card-header">
			<div class="icon-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-dumbbell">
					<path d="M14.4 14.4 9.6 9.6"></path>
					<path d="M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z"></path>
					<path d="m21.5 21.5-1.4-1.4"></path>
					<path d="M3.9 3.9 2.5 2.5"></path>
					<path d="M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z"></path>
				</svg>
			</div>
			<h2>Welcome Back</h2>
			<p>Sign in to continue your workout</p>
		</header>

		<form class="login-form" @onsubmit="Login_Click" @onsubmit:preventDefault>
			<div class="form-group">
				<label for="email">Email</label>
				<div class="input-wrapper">
					<svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>
					<input type="email" id="email" placeholder="you@example.com" @bind="Email" required>
				</div>
			</div>

			<div class="form-group">
				<label for="password">Password</label>
				<div class="input-wrapper">
					<svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
					<input type="password" id="password" placeholder="••••••••" @bind="Password" required>
                    @if (PassInputType == "text")
                    {
                        <span class="passvisible-icon" @onclick="togglepassword"><img id="eyeIcon" src="https://img.icons8.com/fluency-systems-regular/20/7F8C8D/invisible.png" alt="Hide password icon" class="w-5 h-5" onerror="this.src='https://images.unsplash.com/photo-1633265486064-086b219458ec?q=80&amp;w=2940&amp;auto=format&amp;fit=crop'; this.onerror=null;"></span>

                    }
                    else
                    {
                        <span class="passvisible-icon" @onclick="togglepassword"><img id="eyeIcon" src="https://img.icons8.com/fluency-systems-regular/20/7F8C8D/visible.png" alt="Show password icon" class="w-5 h-5" onerror="this.src='https://images.unsplash.com/photo-1633265486064-086b219458ec?q=80&amp;w=2940&amp;auto=format&amp;fit=crop'; this.onerror=null;"></span>
                    }
				</div>
			</div>

			<button type="submit" class="btn-primary">
				@if (isLoading)
			{
				<span>
					<svg class="spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
						<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
						<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
					</svg>
					Signing in...
				</span>
			}
			else
			{
				<span>Sign In</span>
			}
			</button>

			
		</form>

		<footer class="card-footer">
			<button class="btn-link" @onclick="OnNavigateToSignUp">Don't have an account? Sign up</button>
		</footer>
	</div>
</div>





<style>
	.passvisible-icon {
		position: absolute;
		right: 12px;
		top: 7px;
	}
</style>

